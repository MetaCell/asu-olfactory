FROM python:3.9
ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update && \
      apt-get -y install sudo

USER root

# Update Ubuntu Software repository
RUN apt -y install python3-pip wget 
RUN pip install pandas psycopg2-binary wheel

COPY ../../scripts/populateTable.py /CID_Chunks/populateTable.py
COPY ../../scripts/install.sh /CID_Chunks/install.sh
COPY ../../scripts/normalize.py /CID_Chunks/normalize.py

WORKDIR /CID_Chunks
RUN ls
RUN wget https://ftp.ncbi.nlm.nih.gov/pubchem/Compound/Extras/CID-Synonym-unfiltered.gz
RUN gunzip CID-Synonym-unfiltered.gz
RUN python3 normalize.py

ENTRYPOINT [ "python3", "populateTable.py"]
